-*- org -*-

* "fixture" som alt till "setup" + "cleanup"
<2016-03-22 tis>
Ett "fixture" består av en setup-action och en cleanup-action.

setup-action:en körs på liknande sättt som "setup", och
cleanup-actionen:en körs liknande "cleanup".

Fördelen skulle vara problemet med att synka setup och cleanup:
Om det är flera saker som ska sättas upp m setup, och någon av dessa
misslyckas så körs "cleanup" för att rensa upp.  Problemet är att veta hur
många saker "setup"-fasen hunnit sätta upp - och alltså vad som behöver
städas.

Iom att en "fixture" är en enhet som innehåller båda delarna så vet man att
det är de fixture vars setup exekverats som behöver cleanup.

Typ lyckad exekvering av en fixtures setup-sak registrerar dess cleanup-sak
för senare exekvering.  fixtures som inte "hinner" exekveras därför att
tidigare fixtures misslyckas med setup kommer då inte att registrera någon
cleanup-sak.

Skulle t ex kunna implementeras i testfall genom att fixturen är ett program
som användaren anger.  Under setup-fasen (el motsvarande) så körs programmet
med argumentet "setup".  Och under cleanup-fasen (el motsvarande) så körs
programmet m argumentet "cleanup".

"fixture" skulle kunna komplettera "setup" + "cleanup".
* Multipla fall-filer på kommandoraden kör implicit test-svit
Möjlighet att ange "anonym" testsvit genom att ange de testfall som ska ingå
på kommandoraden.
Argumenten som ger inställningar för testfall (t ex preprocessor,
act-program-executor) kan hanteras som inställningar för sviten.

Programmet ska köra, och rapportera, som om en svit angivits som innehöll de
givna fallen.
* <2015-11-04 ons> Ange filstruktur i textformat att installera
På liknande sätt som jag gör i Python:
DirContents([File('f','contents'], Dir('d', [...]))

Vore ju bekvämt om det fanns en liknande notation för filer att installera.
Då skulle man slippa ha dem i filsystemet, i de fall det inte är nödvändigt av
andra orsaker.

Kruxet är bra syntax.
Alternativ:
 - egendefinierad
 - JSON
 - XML

T ex
----------------------------------------
[setup]
file-structure --xml <<EOF
<contents>
  <file name="empty-file"/>
  <file name="g" timestamp="2015-11-03 10:20:30"/>
  <file name="non-empty">contents of file</file>
  <dir name="empty-dir"/>
  <dir name="non-empty-dir">
    <file name="f"/>
  </dir>
<contents>
EOF
----------------------------------------

Ev kunde ett antal xml entities sättas så att de fanns att tillgå, på ung
samma sätt som med omgivningsvariabler.


assert/JÄMFÖRELSE
Vore naturligtvis även användbart att kunna asserta att innehållet i en
katalog är identiskt (el innehåller som minst) en sådan hårdkodad filstruktur.
* timeout
Ev möjlighet att ange för test-fall i configure: time-out för act-fasen.

Ev möjlighet att ange för test-svit i configure: gemensam time-out för
act-fasen för alla test-fall.
