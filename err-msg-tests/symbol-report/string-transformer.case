[setup]

def string-transformer IDENTITY = identity

def string-transformer REPLACE            = replace abc ABC
def string-transformer REPLACE__PRESERVE  = replace -preserve-new-lines abc ABC

def string-transformer FILTER = filter line-num == 3

def string LIMIT_UL_STR = '1+2:3-4'

def string-transformer FILTER_LINE_NUM__SINGLE = filter -line-nums 70+2
def string-transformer FILTER_LINE_NUM__UPPER  = filter -line-nums :70+2
def string-transformer FILTER_LINE_NUM__LOWER  = filter -line-nums 70+2:
def string-transformer FILTER_LINE_NUM__LU     = filter -line-nums @[LIMIT_UL_STR]@
def string-transformer FILTER_LINE_NUM__MULTI  = filter -line-nums 1 2 4: :5 6:7

def string-transformer SEQUENCE = REPLACE | FILTER

def string-transformer RUN__INTERPRET_EXIT_CODE = run % my-program arg1 "arg 2"
def string-transformer RUN__IGNORE_EXIT_CODE    = run -ignore-exit-code % my-program arg1 "arg 2"

def string-transformer RUN__W_TRANSFORMER = run -ignore-exit-code % my-program arg1 "arg 2"
                                            -transformed-by char-case -to-lower

def string-transformer RUN__COMPLEX =

    run % my-program arg1 "arg 2"
          -stdin (
             -contents-of stdin.txt
               -transformed-by replace a b
             )
          -transformed-by char-case -to-lower

def string-transformer REPLACE_TCDS_DIRS  = replace-test-case-dirs

def string-transformer TO_LOWER_CASE = char-case -to-lower
def string-transformer TO_UPPER_CASE = char-case -to-upper

def string-transformer STRIP_TRAILING_NL = strip -trailing-new-lines
def string-transformer STRIP_TRAILING_WS = strip -trailing-space
def string-transformer STRIP_WS          = strip
